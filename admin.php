<? require 'db.php'; 
if (!isset($_SESSION['auth']) || $_SESSION['auth'] != 'Y') {
    header('Location: index.php');
}?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <title>Админ</title>
</head>
<body>
    <? 
    $stmt = $pdo->query("SELECT id, name FROM authors");
    $authors = array();
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        $authors[] = array(
            'id' => $row['id'],
            'name' => $row['name']
        );
    }
    ?>
    <div class="container mt-4">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Книги</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">Авторы</button>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                <div class="d-flex">
                    <table class="table table-hover w-75">
                        <thead>
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Наименование</th>
                                <th scope="col">Автор</th>
                                <th scope="col">Редактировать / Удалить</th>
                            </tr>
                        </thead>
                        <tbody>
                            <? $stmt = $pdo->query("SELECT b.id, b.title, b.author_id, a.name AS author_name FROM books b JOIN authors a ON a.id = b.author_id");
                            while ($row = $stmt->fetch(PDO::FETCH_ASSOC)): ?>
                            <tr class="align-text-bottom" id="books<?=$row['id']?>" data-author="<?=$row['author_id'];?>">
                                <td scope="col"><?=$row['id'];?></td>
                                <td scope="col" class="titleBook"><?=$row['title'];?></td>
                                <td scope="col" class="authorBook"><?=$row['author_name'];?></td>
                                <td scope="col">
                                    <button class="btn" onclick="updateBook(<?=$row['id']?>)">
                                        <svg width="30" height="30" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="20" height="20" rx="2" fill="black"/><path d="M11.2125 6.675C11.2262 6.68666 11.24 6.69833 11.2537 6.71001C11.2651 6.71976 11.2651 6.71976 11.2768 6.7297C11.3145 6.7627 11.3497 6.79803 11.385 6.83353C11.3931 6.8416 11.4012 6.84968 11.4095 6.85801C11.4364 6.88486 11.4632 6.91177 11.4901 6.93867C11.5094 6.95802 11.5288 6.97736 11.5481 6.99671C11.6005 7.04907 11.6528 7.10148 11.7052 7.15389C11.7599 7.20872 11.8147 7.26351 11.8695 7.3183C11.9731 7.422 12.0767 7.52573 12.1804 7.62947C12.2632 7.71238 12.346 7.79527 12.4288 7.87815C12.4347 7.88399 12.4405 7.88984 12.4465 7.89586C12.4758 7.92517 12.5051 7.95448 12.5344 7.98379C12.7771 8.22665 13.0198 8.46956 13.2625 8.7125C13.2105 8.77454 13.1564 8.83292 13.099 8.89003C13.0904 8.8987 13.0817 8.90737 13.0728 8.9163C13.0438 8.94529 13.0148 8.97424 12.9858 9.00319C12.9648 9.0242 12.9438 9.04521 12.9228 9.06622C12.8772 9.11187 12.8315 9.1575 12.7859 9.20311C12.718 9.27094 12.6501 9.3388 12.5823 9.40667C12.4681 9.52085 12.3539 9.63499 12.2397 9.74912C12.1266 9.86211 12.0136 9.97511 11.9006 10.0881C11.89 10.0987 11.89 10.0987 11.8793 10.1094C11.8435 10.1451 11.8078 10.1808 11.7721 10.2165C11.5193 10.4693 11.2664 10.7221 11.0136 10.9749C10.7679 11.2204 10.5223 11.466 10.2767 11.7115C10.2691 11.7191 10.2615 11.7267 10.2537 11.7345C10.1777 11.8105 10.1016 11.8865 10.0256 11.9626C9.87066 12.1174 9.71574 12.2723 9.56083 12.4272C9.55371 12.4343 9.54658 12.4414 9.53924 12.4488C9.06369 12.9242 8.5881 13.3996 8.1125 13.875C8.06439 13.8471 8.02736 13.818 7.98791 13.7786C7.98199 13.7727 7.97606 13.7668 7.96996 13.7608C7.95023 13.7411 7.93059 13.7214 7.91095 13.7017C7.89678 13.6876 7.88261 13.6734 7.86843 13.6593C7.83003 13.621 7.7917 13.5826 7.75339 13.5443C7.71331 13.5041 7.67316 13.464 7.63302 13.4239C7.56568 13.3566 7.49838 13.2893 7.43112 13.2219C7.35327 13.1439 7.27532 13.066 7.19733 12.9881C7.13041 12.9213 7.06353 12.8545 6.99669 12.7876C6.95676 12.7476 6.91681 12.7076 6.87681 12.6677C6.83925 12.6302 6.80176 12.5927 6.76431 12.5551C6.75052 12.5413 6.73672 12.5275 6.72289 12.5137C6.70408 12.495 6.68536 12.4762 6.66665 12.4573C6.65613 12.4468 6.64561 12.4363 6.63478 12.4254C6.6125 12.4 6.6125 12.4 6.6125 12.375C6.60531 12.3719 6.59813 12.3688 6.59072 12.3655C6.55845 12.3478 6.5369 12.3274 6.51093 12.3013C6.49592 12.2863 6.49592 12.2863 6.4806 12.2709C6.46992 12.2601 6.45924 12.2493 6.44824 12.2382C6.43721 12.2271 6.42619 12.2161 6.41483 12.2047C6.3856 12.1753 6.35643 12.1459 6.32729 12.1165C6.2975 12.0865 6.26764 12.0565 6.23779 12.0265C6.1793 11.9677 6.12087 11.9089 6.0625 11.85C6.07871 11.8143 6.0958 11.7886 6.12347 11.7609C6.13457 11.7497 6.13457 11.7497 6.1459 11.7383C6.15406 11.7302 6.16221 11.7221 6.17062 11.7138C6.1793 11.7051 6.18798 11.6964 6.19692 11.6874C6.22625 11.658 6.25566 11.6287 6.28507 11.5994C6.30624 11.5782 6.3274 11.5571 6.34855 11.5359C6.39468 11.4897 6.44084 11.4436 6.48703 11.3975C6.55572 11.329 6.62433 11.2603 6.69294 11.1917C6.80833 11.0763 6.92379 10.9609 7.03927 10.8456C7.15364 10.7314 7.26799 10.6171 7.3823 10.5028C7.38941 10.4957 7.39651 10.4886 7.40383 10.4813C7.4399 10.4452 7.47598 10.4092 7.51205 10.3731C7.76766 10.1176 8.02332 9.86206 8.27902 9.60659C8.52746 9.35839 8.77586 9.11016 9.02424 8.86189C9.03189 8.85424 9.03954 8.84659 9.04743 8.83871C9.12429 8.76188 9.20115 8.68505 9.27801 8.60822C9.43459 8.45171 9.59117 8.2952 9.74775 8.13869C9.75495 8.13149 9.76215 8.1243 9.76957 8.11688C10.2505 7.6362 10.7315 7.15559 11.2125 6.675Z" fill="white"/><path d="M13.775 5.175C13.8031 5.19602 13.8297 5.21848 13.8561 5.24154C13.8673 5.25123 13.8673 5.25123 13.8787 5.26112C13.9713 5.34229 14.058 5.42936 14.1448 5.5165C14.1628 5.53445 14.1808 5.55239 14.1987 5.57033C14.236 5.60754 14.2732 5.64479 14.3103 5.68208C14.3581 5.72994 14.4059 5.77769 14.4538 5.82541C14.4907 5.86225 14.5276 5.89915 14.5644 5.93607C14.5821 5.95372 14.5997 5.97135 14.6174 5.98897C14.6419 6.0134 14.6663 6.03792 14.6907 6.06246C14.698 6.06973 14.7053 6.077 14.7129 6.08449C14.7625 6.13464 14.7625 6.13464 14.7625 6.1625C14.7749 6.16662 14.7872 6.17075 14.8 6.175C14.8707 6.24819 14.9242 6.33104 14.9625 6.425C14.9665 6.43478 14.9705 6.44456 14.9746 6.45464C15.0299 6.6187 15.0176 6.81759 14.95 6.975C14.8977 7.07808 14.8363 7.16019 14.7539 7.24071C14.7434 7.25122 14.7329 7.26172 14.7221 7.27255C14.6878 7.30678 14.6533 7.34079 14.6188 7.3748C14.5948 7.39866 14.5708 7.42256 14.5469 7.44646C14.4905 7.50263 14.434 7.55864 14.3774 7.61459C14.3129 7.67837 14.2486 7.74233 14.1843 7.80631C14.0523 7.93774 13.9199 8.06894 13.7875 8.2C13.7275 8.14987 13.6707 8.09755 13.6154 8.04229C13.6033 8.0303 13.6033 8.0303 13.591 8.01807C13.5642 7.9915 13.5376 7.96489 13.5109 7.93827C13.4916 7.91913 13.4724 7.89999 13.4531 7.88085C13.3902 7.81824 13.3273 7.75556 13.2645 7.69287C13.2428 7.67127 13.2211 7.64967 13.1995 7.62807C13.1094 7.5383 13.0194 7.44852 12.9294 7.35868C12.8005 7.22994 12.6714 7.10129 12.5422 6.9728C12.4513 6.8824 12.3606 6.79188 12.2699 6.70127C12.2157 6.64714 12.1615 6.59307 12.1071 6.53912C12.0561 6.48847 12.0052 6.43768 11.9545 6.38676C11.9358 6.36806 11.917 6.34942 11.8982 6.33083C11.8726 6.30554 11.8473 6.28007 11.8219 6.25454C11.8144 6.24715 11.8068 6.23975 11.799 6.23214C11.7787 6.21139 11.7787 6.21139 11.75 6.175C11.7555 6.13417 11.7688 6.11397 11.7976 6.08502C11.805 6.07741 11.8125 6.06981 11.8202 6.06198C11.8284 6.05378 11.8366 6.04559 11.8451 6.03714C11.8537 6.0284 11.8624 6.01965 11.8713 6.01064C11.9 5.98167 11.9288 5.95284 11.9576 5.92402C11.9777 5.90388 11.9977 5.88373 12.0178 5.86358C12.0599 5.82127 12.1021 5.77904 12.1444 5.73686C12.1982 5.68309 12.2518 5.6291 12.3054 5.57505C12.3468 5.53331 12.3884 5.49171 12.43 5.45015C12.4498 5.43033 12.4695 5.41046 12.4892 5.39053C12.8427 5.03346 13.3235 4.87844 13.775 5.175Z" fill="white"/><path d="M5.51251 12.375C5.57259 12.4251 5.62932 12.4775 5.68457 12.5329C5.6926 12.5409 5.70064 12.5489 5.70892 12.5572C5.73563 12.5838 5.76229 12.6104 5.78895 12.6371C5.80817 12.6563 5.8274 12.6755 5.84662 12.6947C5.89866 12.7466 5.95066 12.7986 6.00265 12.8505C6.03511 12.883 6.06759 12.9155 6.10007 12.9479C6.21333 13.061 6.32655 13.1742 6.43974 13.2874C6.54538 13.3931 6.65108 13.4986 6.75682 13.6042C6.84758 13.6948 6.93829 13.7854 7.02896 13.8761C7.08313 13.9303 7.13732 13.9844 7.19156 14.0385C7.24247 14.0893 7.29332 14.1402 7.34413 14.1911C7.36284 14.2098 7.38156 14.2285 7.40031 14.2471C7.42579 14.2725 7.45119 14.298 7.47657 14.3235C7.4841 14.3309 7.49163 14.3384 7.49938 14.3461C7.55001 14.3971 7.55001 14.3971 7.55001 14.425C7.4047 14.4663 7.25904 14.5045 7.11207 14.5394C7.09219 14.5442 7.07231 14.5489 7.05243 14.5537C7.01051 14.5637 6.96858 14.5737 6.92665 14.5837C6.8274 14.6074 6.72817 14.6312 6.62895 14.655C6.60669 14.6603 6.58442 14.6657 6.56216 14.671C6.31309 14.7307 6.06436 14.7917 5.81571 14.8531C5.77752 14.8625 5.73931 14.8719 5.7011 14.8812C5.64778 14.8943 5.59458 14.9078 5.54141 14.9215C5.51378 14.9284 5.48614 14.9354 5.45851 14.9423C5.44607 14.9456 5.43363 14.9489 5.42081 14.9523C5.32237 14.9768 5.21881 14.9927 5.12033 14.9617C5.07089 14.9252 5.02769 14.8803 5.00001 14.825C4.98936 14.7 5.0126 14.5833 5.04033 14.4623C5.04468 14.4428 5.04901 14.4232 5.05333 14.4037C5.065 14.351 5.07689 14.2984 5.08882 14.2458C5.10136 14.1903 5.11371 14.1348 5.12607 14.0793C5.14688 13.986 5.16782 13.8927 5.18884 13.7995C5.2183 13.6689 5.24754 13.5382 5.27673 13.4075C5.44927 12.6353 5.44927 12.6353 5.51251 12.375Z" fill="white"/></svg>
                                    </button>
                                    <button class="btn" onclick="deleteItem('books', <?=$row['id']?>)">
                                        <svg width="30" height="30" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.16693 0.014556C2.19438 0.0144643 2.22184 0.0143726 2.25013 0.0142781C2.34235 0.014018 2.43458 0.0140351 2.5268 0.0140511C2.5935 0.0139225 2.66021 0.0137772 2.72691 0.0136168C2.9104 0.0132263 3.09389 0.0130813 3.27738 0.0129778C3.47521 0.0128256 3.67304 0.0124522 3.87087 0.0121118C4.34874 0.0113415 4.8266 0.0109489 5.30447 0.010602C5.52954 0.0104311 5.75462 0.0102219 5.97969 0.0100177C6.72795 0.00935447 7.47621 0.00878942 8.22446 0.00850705C8.41863 0.0084326 8.61279 0.00835773 8.80696 0.00828149C8.87934 0.0082532 8.87934 0.0082532 8.95319 0.00822434C9.73485 0.00790079 10.5165 0.00691308 11.2982 0.00564684C12.1008 0.00435724 12.9034 0.00365536 13.706 0.00353081C14.1566 0.00344644 14.6072 0.00310581 15.0578 0.00210937C15.4416 0.00126266 15.8254 0.000949494 16.2091 0.00132837C16.4048 0.00150541 16.6006 0.00143239 16.7963 0.00067492C16.9757 -1.34178e-05 17.1551 2.72256e-05 17.3345 0.000631931C17.3992 0.000724416 17.4638 0.000556776 17.5285 9.28183e-05C18.2431 -0.00471338 18.8485 0.17653 19.3656 0.684212C19.749 1.08101 19.9847 1.6166 19.9855 2.16693C19.9855 2.19438 19.9856 2.22184 19.9857 2.25013C19.986 2.34235 19.986 2.43458 19.986 2.5268C19.9861 2.5935 19.9862 2.66021 19.9864 2.72691C19.9868 2.9104 19.9869 3.09389 19.987 3.27738C19.9872 3.47521 19.9876 3.67304 19.9879 3.87087C19.9887 4.34874 19.9891 4.8266 19.9894 5.30447C19.9896 5.52954 19.9898 5.75462 19.99 5.97969C19.9907 6.72795 19.9912 7.47621 19.9915 8.22446C19.9916 8.41863 19.9917 8.61279 19.9917 8.80696C19.9917 8.85521 19.9918 8.90347 19.9918 8.95319C19.9921 9.73485 19.9931 10.5165 19.9944 11.2982C19.9957 12.1008 19.9964 12.9034 19.9965 13.706C19.9966 14.1566 19.9969 14.6072 19.9979 15.0578C19.9987 15.4416 19.9991 15.8254 19.9987 16.2091C19.9985 16.4048 19.9986 16.6006 19.9993 16.7963C20 16.9757 20 17.1551 19.9994 17.3345C19.9993 17.3992 19.9995 17.4638 19.9999 17.5285C20.0049 18.2721 19.7938 18.8742 19.2701 19.4085C18.879 19.7827 18.3737 19.9847 17.8331 19.9855C17.8056 19.9855 17.7782 19.9856 17.7499 19.9857C17.6577 19.986 17.5654 19.986 17.4732 19.986C17.4065 19.9861 17.3398 19.9862 17.2731 19.9864C17.0896 19.9868 16.9061 19.9869 16.7226 19.987C16.5248 19.9872 16.327 19.9876 16.1291 19.9879C15.6513 19.9887 15.1734 19.9891 14.6955 19.9894C14.4705 19.9896 14.2454 19.9898 14.0203 19.99C13.2721 19.9907 12.5238 19.9912 11.7755 19.9915C11.5814 19.9916 11.3872 19.9916 11.1931 19.9917C11.1448 19.9917 11.0965 19.9918 11.0468 19.9918C10.2652 19.9921 9.4835 19.9931 8.70184 19.9944C7.89922 19.9956 7.0966 19.9964 6.29397 19.9965C5.84337 19.9966 5.39278 19.9969 4.94219 19.9979C4.55842 19.9987 4.17465 19.9991 3.79088 19.9987C3.59516 19.9985 3.39945 19.9986 3.20373 19.9993C3.02432 20 2.84493 20 2.66552 19.9994C2.60085 19.9993 2.53617 19.9994 2.4715 19.9999C1.72789 20.0049 1.1258 19.7938 0.59147 19.2701C0.217334 18.879 0.0153266 18.3737 0.014556 17.8331C0.0144643 17.8056 0.0143725 17.7782 0.014278 17.7499C0.014018 17.6577 0.0140351 17.5654 0.0140511 17.4732C0.0139224 17.4065 0.0137771 17.3398 0.0136167 17.2731C0.0132263 17.0896 0.0130812 16.9061 0.0129778 16.7226C0.0128256 16.5248 0.0124521 16.327 0.0121118 16.1291C0.0113415 15.6513 0.0109489 15.1734 0.010602 14.6955C0.0104311 14.4705 0.010222 14.2454 0.0100177 14.0203C0.00935452 13.2721 0.00878943 12.5238 0.00850707 11.7755C0.00843261 11.5814 0.00835771 11.3872 0.00828146 11.1931C0.0082626 11.1448 0.00824379 11.0965 0.00822436 11.0468C0.0079008 10.2652 0.00691303 9.4835 0.0056468 8.70184C0.0043572 7.89922 0.0036554 7.0966 0.00353085 6.29397C0.00344648 5.84337 0.00310571 5.39278 0.00210927 4.94219C0.00126256 4.55842 0.000949483 4.17465 0.00132836 3.79088C0.0015054 3.59516 0.00143236 3.39945 0.000674896 3.20373C-1.34422e-05 3.02432 2.72116e-05 2.84493 0.000631917 2.66552C0.000724402 2.60085 0.000556776 2.53617 9.28184e-05 2.4715C-0.00471338 1.75692 0.17653 1.15153 0.684212 0.634415C1.08101 0.251014 1.6166 0.0153404 2.16693 0.014556ZM6.22575 6.46072C6.10107 6.64815 6.06595 6.85509 6.10148 7.07611C6.22445 7.48319 6.56775 7.76196 6.86124 8.04983C6.91694 8.10517 6.9726 8.16055 7.02822 8.21598C7.17385 8.36087 7.32006 8.50517 7.46641 8.64935C7.61598 8.79692 7.765 8.94505 7.91407 9.09314C8.20599 9.38298 8.49853 9.6722 8.79146 9.96102C8.72789 10.1238 8.60847 10.231 8.48585 10.3504C8.46258 10.3733 8.43931 10.3963 8.41533 10.42C8.36482 10.4698 8.31424 10.5195 8.26357 10.5692C8.18321 10.648 8.10314 10.7271 8.02315 10.8063C7.79572 11.0315 7.56792 11.2563 7.33952 11.4805C7.19973 11.6178 7.06042 11.7555 6.92141 11.8936C6.86855 11.9459 6.8155 11.998 6.76227 12.05C6.28631 12.4901 6.28631 12.4901 6.08199 13.0847C6.12186 13.3937 6.20364 13.568 6.45067 13.7656C6.64137 13.8972 6.84801 13.9352 7.07611 13.8985C7.48319 13.7756 7.76196 13.4323 8.04983 13.1388C8.10517 13.0831 8.16055 13.0274 8.21598 12.9718C8.36087 12.8262 8.50517 12.6799 8.64935 12.5336C8.79692 12.384 8.94505 12.235 9.09314 12.0859C9.38298 11.794 9.6722 11.5015 9.96102 11.2085C10.1238 11.2721 10.231 11.3915 10.3504 11.5142C10.3733 11.5374 10.3963 11.5607 10.42 11.5847C10.4698 11.6352 10.5195 11.6858 10.5692 11.7364C10.648 11.8168 10.7271 11.8969 10.8063 11.9769C11.0315 12.2043 11.2563 12.4321 11.4805 12.6605C11.6178 12.8003 11.7555 12.9396 11.8936 13.0786C11.9459 13.1315 11.998 13.1845 12.05 13.2377C12.4901 13.7137 12.4901 13.7137 13.0847 13.918C13.3937 13.8781 13.568 13.7964 13.7656 13.5493C13.8972 13.3586 13.9352 13.152 13.8985 12.9239C13.7756 12.5168 13.4323 12.238 13.1388 11.9502C13.0831 11.8948 13.0274 11.8395 12.9718 11.784C12.8262 11.6391 12.6799 11.4948 12.5336 11.3507C12.384 11.2031 12.235 11.055 12.0859 10.9069C11.794 10.617 11.5015 10.3278 11.2085 10.039C11.2721 9.87625 11.3915 9.76901 11.5142 9.64965C11.5374 9.62668 11.5607 9.60371 11.5847 9.58004C11.6352 9.53022 11.6858 9.48049 11.7364 9.43084C11.8168 9.35202 11.8969 9.2729 11.9769 9.19368C12.2043 8.96851 12.4321 8.7437 12.6605 8.5195C12.8003 8.38223 12.9396 8.24448 13.0786 8.10643C13.1315 8.05411 13.1845 8.00199 13.2377 7.95005C13.7137 7.50989 13.7137 7.50989 13.918 6.9153C13.8779 6.60417 13.7955 6.43271 13.5466 6.23443C13.3474 6.09201 13.1632 6.07039 12.9239 6.10148C12.5173 6.22114 12.2368 6.56906 11.9502 6.86124C11.8948 6.91694 11.8395 6.9726 11.784 7.02822C11.6391 7.17385 11.4948 7.32006 11.3507 7.4664C11.2031 7.61598 11.055 7.765 10.9069 7.91407C10.617 8.20599 10.3278 8.49853 10.039 8.79146C9.87625 8.72789 9.76901 8.60847 9.64965 8.48585C9.62668 8.46258 9.60371 8.43931 9.58004 8.41533C9.53022 8.36482 9.48049 8.31424 9.43084 8.26357C9.35202 8.18321 9.2729 8.10314 9.19368 8.02315C8.96851 7.79572 8.7437 7.56792 8.5195 7.33952C8.38223 7.19973 8.24448 7.06042 8.10643 6.92141C8.05411 6.86855 8.00199 6.8155 7.95005 6.76227C7.50114 6.28354 7.50114 6.28354 6.89581 6.07955C6.60705 6.09891 6.40114 6.23624 6.22575 6.46072Z" fill="black"/></svg>
                                    </button>
                                </td>
                            </tr>
                            <? endwhile; ?>
                        </tbody>
                    </table>
                    <div class="ms-5 mt-3 w-25">
                        <h2>Добавить книгу</h2>
                        <form method="post" class="mt-3 add-form">
                            <input type="hidden" class="form-control" name="tableName" id="tableName" value="books">

                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" name="title" id="title" placeholder="Название">
                                <label for="title">Название</label>
                            </div>
                            <div class="form-floating">
                                <select class="form-select" id="author_id" name="author_id">
                                    <? foreach ($authors as $kAuthor => $author): ?>
                                        <option value="<?=$author['id']?>" <?= $kAuthor==0 ? 'selected' : ''?>><?=$author['name']?></option>
                                    <? endforeach; ?>
                                </select>
                                <label for="author_id">Выберите автора</label>
                            </div>
                            <input type="submit" value="Создать" class="btn btn-outline-primary w-100 mt-3">
                        </form>
                        <div id="addBookRes" class="mt-2"></div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
                <div class="d-flex">
                    <table class="table table-hover w-75">
                        <thead>
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Имя</th>
                                <th scope="col">Удалить</th>
                            </tr>
                        </thead>
                        <tbody>
                            <? foreach ($authors as $author): ?>
                            <tr id="authors<?=$author['id']?>">
                                <td scope="col"><?=$author['id'];?></td>
                                <td scope="col" class="nameAuthor"><?=$author['name'];?></td>
                                <td scope="col">
                                    <button class="btn" onclick="updateAuthor(<?=$author['id']?>)">
                                        <svg width="30" height="30" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="20" height="20" rx="2" fill="black"/><path d="M11.2125 6.675C11.2262 6.68666 11.24 6.69833 11.2537 6.71001C11.2651 6.71976 11.2651 6.71976 11.2768 6.7297C11.3145 6.7627 11.3497 6.79803 11.385 6.83353C11.3931 6.8416 11.4012 6.84968 11.4095 6.85801C11.4364 6.88486 11.4632 6.91177 11.4901 6.93867C11.5094 6.95802 11.5288 6.97736 11.5481 6.99671C11.6005 7.04907 11.6528 7.10148 11.7052 7.15389C11.7599 7.20872 11.8147 7.26351 11.8695 7.3183C11.9731 7.422 12.0767 7.52573 12.1804 7.62947C12.2632 7.71238 12.346 7.79527 12.4288 7.87815C12.4347 7.88399 12.4405 7.88984 12.4465 7.89586C12.4758 7.92517 12.5051 7.95448 12.5344 7.98379C12.7771 8.22665 13.0198 8.46956 13.2625 8.7125C13.2105 8.77454 13.1564 8.83292 13.099 8.89003C13.0904 8.8987 13.0817 8.90737 13.0728 8.9163C13.0438 8.94529 13.0148 8.97424 12.9858 9.00319C12.9648 9.0242 12.9438 9.04521 12.9228 9.06622C12.8772 9.11187 12.8315 9.1575 12.7859 9.20311C12.718 9.27094 12.6501 9.3388 12.5823 9.40667C12.4681 9.52085 12.3539 9.63499 12.2397 9.74912C12.1266 9.86211 12.0136 9.97511 11.9006 10.0881C11.89 10.0987 11.89 10.0987 11.8793 10.1094C11.8435 10.1451 11.8078 10.1808 11.7721 10.2165C11.5193 10.4693 11.2664 10.7221 11.0136 10.9749C10.7679 11.2204 10.5223 11.466 10.2767 11.7115C10.2691 11.7191 10.2615 11.7267 10.2537 11.7345C10.1777 11.8105 10.1016 11.8865 10.0256 11.9626C9.87066 12.1174 9.71574 12.2723 9.56083 12.4272C9.55371 12.4343 9.54658 12.4414 9.53924 12.4488C9.06369 12.9242 8.5881 13.3996 8.1125 13.875C8.06439 13.8471 8.02736 13.818 7.98791 13.7786C7.98199 13.7727 7.97606 13.7668 7.96996 13.7608C7.95023 13.7411 7.93059 13.7214 7.91095 13.7017C7.89678 13.6876 7.88261 13.6734 7.86843 13.6593C7.83003 13.621 7.7917 13.5826 7.75339 13.5443C7.71331 13.5041 7.67316 13.464 7.63302 13.4239C7.56568 13.3566 7.49838 13.2893 7.43112 13.2219C7.35327 13.1439 7.27532 13.066 7.19733 12.9881C7.13041 12.9213 7.06353 12.8545 6.99669 12.7876C6.95676 12.7476 6.91681 12.7076 6.87681 12.6677C6.83925 12.6302 6.80176 12.5927 6.76431 12.5551C6.75052 12.5413 6.73672 12.5275 6.72289 12.5137C6.70408 12.495 6.68536 12.4762 6.66665 12.4573C6.65613 12.4468 6.64561 12.4363 6.63478 12.4254C6.6125 12.4 6.6125 12.4 6.6125 12.375C6.60531 12.3719 6.59813 12.3688 6.59072 12.3655C6.55845 12.3478 6.5369 12.3274 6.51093 12.3013C6.49592 12.2863 6.49592 12.2863 6.4806 12.2709C6.46992 12.2601 6.45924 12.2493 6.44824 12.2382C6.43721 12.2271 6.42619 12.2161 6.41483 12.2047C6.3856 12.1753 6.35643 12.1459 6.32729 12.1165C6.2975 12.0865 6.26764 12.0565 6.23779 12.0265C6.1793 11.9677 6.12087 11.9089 6.0625 11.85C6.07871 11.8143 6.0958 11.7886 6.12347 11.7609C6.13457 11.7497 6.13457 11.7497 6.1459 11.7383C6.15406 11.7302 6.16221 11.7221 6.17062 11.7138C6.1793 11.7051 6.18798 11.6964 6.19692 11.6874C6.22625 11.658 6.25566 11.6287 6.28507 11.5994C6.30624 11.5782 6.3274 11.5571 6.34855 11.5359C6.39468 11.4897 6.44084 11.4436 6.48703 11.3975C6.55572 11.329 6.62433 11.2603 6.69294 11.1917C6.80833 11.0763 6.92379 10.9609 7.03927 10.8456C7.15364 10.7314 7.26799 10.6171 7.3823 10.5028C7.38941 10.4957 7.39651 10.4886 7.40383 10.4813C7.4399 10.4452 7.47598 10.4092 7.51205 10.3731C7.76766 10.1176 8.02332 9.86206 8.27902 9.60659C8.52746 9.35839 8.77586 9.11016 9.02424 8.86189C9.03189 8.85424 9.03954 8.84659 9.04743 8.83871C9.12429 8.76188 9.20115 8.68505 9.27801 8.60822C9.43459 8.45171 9.59117 8.2952 9.74775 8.13869C9.75495 8.13149 9.76215 8.1243 9.76957 8.11688C10.2505 7.6362 10.7315 7.15559 11.2125 6.675Z" fill="white"/><path d="M13.775 5.175C13.8031 5.19602 13.8297 5.21848 13.8561 5.24154C13.8673 5.25123 13.8673 5.25123 13.8787 5.26112C13.9713 5.34229 14.058 5.42936 14.1448 5.5165C14.1628 5.53445 14.1808 5.55239 14.1987 5.57033C14.236 5.60754 14.2732 5.64479 14.3103 5.68208C14.3581 5.72994 14.4059 5.77769 14.4538 5.82541C14.4907 5.86225 14.5276 5.89915 14.5644 5.93607C14.5821 5.95372 14.5997 5.97135 14.6174 5.98897C14.6419 6.0134 14.6663 6.03792 14.6907 6.06246C14.698 6.06973 14.7053 6.077 14.7129 6.08449C14.7625 6.13464 14.7625 6.13464 14.7625 6.1625C14.7749 6.16662 14.7872 6.17075 14.8 6.175C14.8707 6.24819 14.9242 6.33104 14.9625 6.425C14.9665 6.43478 14.9705 6.44456 14.9746 6.45464C15.0299 6.6187 15.0176 6.81759 14.95 6.975C14.8977 7.07808 14.8363 7.16019 14.7539 7.24071C14.7434 7.25122 14.7329 7.26172 14.7221 7.27255C14.6878 7.30678 14.6533 7.34079 14.6188 7.3748C14.5948 7.39866 14.5708 7.42256 14.5469 7.44646C14.4905 7.50263 14.434 7.55864 14.3774 7.61459C14.3129 7.67837 14.2486 7.74233 14.1843 7.80631C14.0523 7.93774 13.9199 8.06894 13.7875 8.2C13.7275 8.14987 13.6707 8.09755 13.6154 8.04229C13.6033 8.0303 13.6033 8.0303 13.591 8.01807C13.5642 7.9915 13.5376 7.96489 13.5109 7.93827C13.4916 7.91913 13.4724 7.89999 13.4531 7.88085C13.3902 7.81824 13.3273 7.75556 13.2645 7.69287C13.2428 7.67127 13.2211 7.64967 13.1995 7.62807C13.1094 7.5383 13.0194 7.44852 12.9294 7.35868C12.8005 7.22994 12.6714 7.10129 12.5422 6.9728C12.4513 6.8824 12.3606 6.79188 12.2699 6.70127C12.2157 6.64714 12.1615 6.59307 12.1071 6.53912C12.0561 6.48847 12.0052 6.43768 11.9545 6.38676C11.9358 6.36806 11.917 6.34942 11.8982 6.33083C11.8726 6.30554 11.8473 6.28007 11.8219 6.25454C11.8144 6.24715 11.8068 6.23975 11.799 6.23214C11.7787 6.21139 11.7787 6.21139 11.75 6.175C11.7555 6.13417 11.7688 6.11397 11.7976 6.08502C11.805 6.07741 11.8125 6.06981 11.8202 6.06198C11.8284 6.05378 11.8366 6.04559 11.8451 6.03714C11.8537 6.0284 11.8624 6.01965 11.8713 6.01064C11.9 5.98167 11.9288 5.95284 11.9576 5.92402C11.9777 5.90388 11.9977 5.88373 12.0178 5.86358C12.0599 5.82127 12.1021 5.77904 12.1444 5.73686C12.1982 5.68309 12.2518 5.6291 12.3054 5.57505C12.3468 5.53331 12.3884 5.49171 12.43 5.45015C12.4498 5.43033 12.4695 5.41046 12.4892 5.39053C12.8427 5.03346 13.3235 4.87844 13.775 5.175Z" fill="white"/><path d="M5.51251 12.375C5.57259 12.4251 5.62932 12.4775 5.68457 12.5329C5.6926 12.5409 5.70064 12.5489 5.70892 12.5572C5.73563 12.5838 5.76229 12.6104 5.78895 12.6371C5.80817 12.6563 5.8274 12.6755 5.84662 12.6947C5.89866 12.7466 5.95066 12.7986 6.00265 12.8505C6.03511 12.883 6.06759 12.9155 6.10007 12.9479C6.21333 13.061 6.32655 13.1742 6.43974 13.2874C6.54538 13.3931 6.65108 13.4986 6.75682 13.6042C6.84758 13.6948 6.93829 13.7854 7.02896 13.8761C7.08313 13.9303 7.13732 13.9844 7.19156 14.0385C7.24247 14.0893 7.29332 14.1402 7.34413 14.1911C7.36284 14.2098 7.38156 14.2285 7.40031 14.2471C7.42579 14.2725 7.45119 14.298 7.47657 14.3235C7.4841 14.3309 7.49163 14.3384 7.49938 14.3461C7.55001 14.3971 7.55001 14.3971 7.55001 14.425C7.4047 14.4663 7.25904 14.5045 7.11207 14.5394C7.09219 14.5442 7.07231 14.5489 7.05243 14.5537C7.01051 14.5637 6.96858 14.5737 6.92665 14.5837C6.8274 14.6074 6.72817 14.6312 6.62895 14.655C6.60669 14.6603 6.58442 14.6657 6.56216 14.671C6.31309 14.7307 6.06436 14.7917 5.81571 14.8531C5.77752 14.8625 5.73931 14.8719 5.7011 14.8812C5.64778 14.8943 5.59458 14.9078 5.54141 14.9215C5.51378 14.9284 5.48614 14.9354 5.45851 14.9423C5.44607 14.9456 5.43363 14.9489 5.42081 14.9523C5.32237 14.9768 5.21881 14.9927 5.12033 14.9617C5.07089 14.9252 5.02769 14.8803 5.00001 14.825C4.98936 14.7 5.0126 14.5833 5.04033 14.4623C5.04468 14.4428 5.04901 14.4232 5.05333 14.4037C5.065 14.351 5.07689 14.2984 5.08882 14.2458C5.10136 14.1903 5.11371 14.1348 5.12607 14.0793C5.14688 13.986 5.16782 13.8927 5.18884 13.7995C5.2183 13.6689 5.24754 13.5382 5.27673 13.4075C5.44927 12.6353 5.44927 12.6353 5.51251 12.375Z" fill="white"/></svg>
                                    </button>
                                    <button class="btn" onclick="deleteItem('authors', <?=$author['id']?>)">
                                        <svg width="30" height="30" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.16693 0.014556C2.19438 0.0144643 2.22184 0.0143726 2.25013 0.0142781C2.34235 0.014018 2.43458 0.0140351 2.5268 0.0140511C2.5935 0.0139225 2.66021 0.0137772 2.72691 0.0136168C2.9104 0.0132263 3.09389 0.0130813 3.27738 0.0129778C3.47521 0.0128256 3.67304 0.0124522 3.87087 0.0121118C4.34874 0.0113415 4.8266 0.0109489 5.30447 0.010602C5.52954 0.0104311 5.75462 0.0102219 5.97969 0.0100177C6.72795 0.00935447 7.47621 0.00878942 8.22446 0.00850705C8.41863 0.0084326 8.61279 0.00835773 8.80696 0.00828149C8.87934 0.0082532 8.87934 0.0082532 8.95319 0.00822434C9.73485 0.00790079 10.5165 0.00691308 11.2982 0.00564684C12.1008 0.00435724 12.9034 0.00365536 13.706 0.00353081C14.1566 0.00344644 14.6072 0.00310581 15.0578 0.00210937C15.4416 0.00126266 15.8254 0.000949494 16.2091 0.00132837C16.4048 0.00150541 16.6006 0.00143239 16.7963 0.00067492C16.9757 -1.34178e-05 17.1551 2.72256e-05 17.3345 0.000631931C17.3992 0.000724416 17.4638 0.000556776 17.5285 9.28183e-05C18.2431 -0.00471338 18.8485 0.17653 19.3656 0.684212C19.749 1.08101 19.9847 1.6166 19.9855 2.16693C19.9855 2.19438 19.9856 2.22184 19.9857 2.25013C19.986 2.34235 19.986 2.43458 19.986 2.5268C19.9861 2.5935 19.9862 2.66021 19.9864 2.72691C19.9868 2.9104 19.9869 3.09389 19.987 3.27738C19.9872 3.47521 19.9876 3.67304 19.9879 3.87087C19.9887 4.34874 19.9891 4.8266 19.9894 5.30447C19.9896 5.52954 19.9898 5.75462 19.99 5.97969C19.9907 6.72795 19.9912 7.47621 19.9915 8.22446C19.9916 8.41863 19.9917 8.61279 19.9917 8.80696C19.9917 8.85521 19.9918 8.90347 19.9918 8.95319C19.9921 9.73485 19.9931 10.5165 19.9944 11.2982C19.9957 12.1008 19.9964 12.9034 19.9965 13.706C19.9966 14.1566 19.9969 14.6072 19.9979 15.0578C19.9987 15.4416 19.9991 15.8254 19.9987 16.2091C19.9985 16.4048 19.9986 16.6006 19.9993 16.7963C20 16.9757 20 17.1551 19.9994 17.3345C19.9993 17.3992 19.9995 17.4638 19.9999 17.5285C20.0049 18.2721 19.7938 18.8742 19.2701 19.4085C18.879 19.7827 18.3737 19.9847 17.8331 19.9855C17.8056 19.9855 17.7782 19.9856 17.7499 19.9857C17.6577 19.986 17.5654 19.986 17.4732 19.986C17.4065 19.9861 17.3398 19.9862 17.2731 19.9864C17.0896 19.9868 16.9061 19.9869 16.7226 19.987C16.5248 19.9872 16.327 19.9876 16.1291 19.9879C15.6513 19.9887 15.1734 19.9891 14.6955 19.9894C14.4705 19.9896 14.2454 19.9898 14.0203 19.99C13.2721 19.9907 12.5238 19.9912 11.7755 19.9915C11.5814 19.9916 11.3872 19.9916 11.1931 19.9917C11.1448 19.9917 11.0965 19.9918 11.0468 19.9918C10.2652 19.9921 9.4835 19.9931 8.70184 19.9944C7.89922 19.9956 7.0966 19.9964 6.29397 19.9965C5.84337 19.9966 5.39278 19.9969 4.94219 19.9979C4.55842 19.9987 4.17465 19.9991 3.79088 19.9987C3.59516 19.9985 3.39945 19.9986 3.20373 19.9993C3.02432 20 2.84493 20 2.66552 19.9994C2.60085 19.9993 2.53617 19.9994 2.4715 19.9999C1.72789 20.0049 1.1258 19.7938 0.59147 19.2701C0.217334 18.879 0.0153266 18.3737 0.014556 17.8331C0.0144643 17.8056 0.0143725 17.7782 0.014278 17.7499C0.014018 17.6577 0.0140351 17.5654 0.0140511 17.4732C0.0139224 17.4065 0.0137771 17.3398 0.0136167 17.2731C0.0132263 17.0896 0.0130812 16.9061 0.0129778 16.7226C0.0128256 16.5248 0.0124521 16.327 0.0121118 16.1291C0.0113415 15.6513 0.0109489 15.1734 0.010602 14.6955C0.0104311 14.4705 0.010222 14.2454 0.0100177 14.0203C0.00935452 13.2721 0.00878943 12.5238 0.00850707 11.7755C0.00843261 11.5814 0.00835771 11.3872 0.00828146 11.1931C0.0082626 11.1448 0.00824379 11.0965 0.00822436 11.0468C0.0079008 10.2652 0.00691303 9.4835 0.0056468 8.70184C0.0043572 7.89922 0.0036554 7.0966 0.00353085 6.29397C0.00344648 5.84337 0.00310571 5.39278 0.00210927 4.94219C0.00126256 4.55842 0.000949483 4.17465 0.00132836 3.79088C0.0015054 3.59516 0.00143236 3.39945 0.000674896 3.20373C-1.34422e-05 3.02432 2.72116e-05 2.84493 0.000631917 2.66552C0.000724402 2.60085 0.000556776 2.53617 9.28184e-05 2.4715C-0.00471338 1.75692 0.17653 1.15153 0.684212 0.634415C1.08101 0.251014 1.6166 0.0153404 2.16693 0.014556ZM6.22575 6.46072C6.10107 6.64815 6.06595 6.85509 6.10148 7.07611C6.22445 7.48319 6.56775 7.76196 6.86124 8.04983C6.91694 8.10517 6.9726 8.16055 7.02822 8.21598C7.17385 8.36087 7.32006 8.50517 7.46641 8.64935C7.61598 8.79692 7.765 8.94505 7.91407 9.09314C8.20599 9.38298 8.49853 9.6722 8.79146 9.96102C8.72789 10.1238 8.60847 10.231 8.48585 10.3504C8.46258 10.3733 8.43931 10.3963 8.41533 10.42C8.36482 10.4698 8.31424 10.5195 8.26357 10.5692C8.18321 10.648 8.10314 10.7271 8.02315 10.8063C7.79572 11.0315 7.56792 11.2563 7.33952 11.4805C7.19973 11.6178 7.06042 11.7555 6.92141 11.8936C6.86855 11.9459 6.8155 11.998 6.76227 12.05C6.28631 12.4901 6.28631 12.4901 6.08199 13.0847C6.12186 13.3937 6.20364 13.568 6.45067 13.7656C6.64137 13.8972 6.84801 13.9352 7.07611 13.8985C7.48319 13.7756 7.76196 13.4323 8.04983 13.1388C8.10517 13.0831 8.16055 13.0274 8.21598 12.9718C8.36087 12.8262 8.50517 12.6799 8.64935 12.5336C8.79692 12.384 8.94505 12.235 9.09314 12.0859C9.38298 11.794 9.6722 11.5015 9.96102 11.2085C10.1238 11.2721 10.231 11.3915 10.3504 11.5142C10.3733 11.5374 10.3963 11.5607 10.42 11.5847C10.4698 11.6352 10.5195 11.6858 10.5692 11.7364C10.648 11.8168 10.7271 11.8969 10.8063 11.9769C11.0315 12.2043 11.2563 12.4321 11.4805 12.6605C11.6178 12.8003 11.7555 12.9396 11.8936 13.0786C11.9459 13.1315 11.998 13.1845 12.05 13.2377C12.4901 13.7137 12.4901 13.7137 13.0847 13.918C13.3937 13.8781 13.568 13.7964 13.7656 13.5493C13.8972 13.3586 13.9352 13.152 13.8985 12.9239C13.7756 12.5168 13.4323 12.238 13.1388 11.9502C13.0831 11.8948 13.0274 11.8395 12.9718 11.784C12.8262 11.6391 12.6799 11.4948 12.5336 11.3507C12.384 11.2031 12.235 11.055 12.0859 10.9069C11.794 10.617 11.5015 10.3278 11.2085 10.039C11.2721 9.87625 11.3915 9.76901 11.5142 9.64965C11.5374 9.62668 11.5607 9.60371 11.5847 9.58004C11.6352 9.53022 11.6858 9.48049 11.7364 9.43084C11.8168 9.35202 11.8969 9.2729 11.9769 9.19368C12.2043 8.96851 12.4321 8.7437 12.6605 8.5195C12.8003 8.38223 12.9396 8.24448 13.0786 8.10643C13.1315 8.05411 13.1845 8.00199 13.2377 7.95005C13.7137 7.50989 13.7137 7.50989 13.918 6.9153C13.8779 6.60417 13.7955 6.43271 13.5466 6.23443C13.3474 6.09201 13.1632 6.07039 12.9239 6.10148C12.5173 6.22114 12.2368 6.56906 11.9502 6.86124C11.8948 6.91694 11.8395 6.9726 11.784 7.02822C11.6391 7.17385 11.4948 7.32006 11.3507 7.4664C11.2031 7.61598 11.055 7.765 10.9069 7.91407C10.617 8.20599 10.3278 8.49853 10.039 8.79146C9.87625 8.72789 9.76901 8.60847 9.64965 8.48585C9.62668 8.46258 9.60371 8.43931 9.58004 8.41533C9.53022 8.36482 9.48049 8.31424 9.43084 8.26357C9.35202 8.18321 9.2729 8.10314 9.19368 8.02315C8.96851 7.79572 8.7437 7.56792 8.5195 7.33952C8.38223 7.19973 8.24448 7.06042 8.10643 6.92141C8.05411 6.86855 8.00199 6.8155 7.95005 6.76227C7.50114 6.28354 7.50114 6.28354 6.89581 6.07955C6.60705 6.09891 6.40114 6.23624 6.22575 6.46072Z" fill="black"/></svg>
                                    </button>
                                </td>
                            </tr>
                            <? endforeach; ?>
                        </tbody>
                    </table>
                    <div class="ms-5 mt-3 w-25">
                        <h2>Добавить автора</h2>
                        <form method="post" class="mt-3 add-form">
                            <input type="hidden" class="form-control" name="tableName" id="tableName" value="authors">
    
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" name="name" id="name" placeholder="Название">
                                <label for="name">Имя автора</label>
                            </div>
                            <input type="submit" value="Создать" class="btn btn-outline-primary w-100 mt-3">
                        </form>
                        <div id="addBookRes" class="mt-2"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* Обновление книги */
        function updateBook(itemID) {
            let row = document.getElementById('books' + itemID);

            let titleCell = row.querySelector('.titleBook');
            titleCell.innerHTML = '<input class="form-control" type="text" id="editTitle'+itemID+'" value="'+titleCell.innerText+'">';
            
            let selectHTML = '<select class="form-select" id="editAuthor'+itemID+'">';
            let authorsList = <?= json_encode($authors) ?>;
            authorsList.forEach(authorItem => {
                let selected = authorItem.id == row.dataset.author ? 'selected' : '';
                selectHTML += '<option value="'+authorItem.id+'" '+selected+'>'+authorItem.name+'</option>';
            });

            selectHTML += '</select>';
            row.querySelector('.authorBook').innerHTML = selectHTML;

            row.querySelector('td:last-child').innerHTML += '<button class="btn btn-outline-primary" onclick="saveUpdateItem(\'books\', '+itemID+')">Сохранить</button>';
        }
        /* Обновление автора */
        function updateAuthor(itemID) {
            let row = document.getElementById('authors' + itemID);

            let titleCell = row.querySelector('.nameAuthor');
            titleCell.innerHTML = '<input class="form-control" type="text" id="editAuthorName'+itemID+'" value="'+titleCell.innerText+'">';

            row.querySelector('td:last-child').innerHTML += '<button class="btn btn-outline-primary" onclick="saveUpdateItem(\'authors\', '+itemID+')">Сохранить</button>';
        }

        /* Сохранение обновлений */
        function saveUpdateItem(tableName, itemID) {
            let formData = new FormData();
            formData.append('tableName', tableName);
            formData.append('id', itemID);

            if (tableName == 'books') {
                formData.append('title', document.getElementById('editTitle' + itemID).value);
                formData.append('author_id', document.getElementById('editAuthor' + itemID).value);
            } else if (tableName == 'authors') {
                formData.append('name', document.getElementById('editAuthorName' + itemID).value);
            }

            fetch('ajax/update_item.php', {
                method: 'POST',
                body: formData
            })
            .then(res => res.json())
            .then(response => {
                if(response.success) {
                    location.reload();
                } else {
                    alert('Ошибка: ' + response.message);
                }
            })
            .catch(err => console.log(err));
        }

        /* Удаление элементов */
        function deleteItem(tableName, itemID) {
            let formData = new FormData();
            formData.append('tableName', tableName);
            formData.append('id', itemID);

            fetch('ajax/delete_item.php', {
                method: 'POST',
                body: formData
            })
            .then(res => res.json())
            .then(response => {
                if(response.success) {
                    let row = document.getElementById(tableName + itemID);           
                    
                    if (tableName == 'authors') {
                        let booksOnDelete = document.querySelectorAll('[data-author="'+itemID+'"]');
                        booksOnDelete.forEach(book => {
                            if(book) book.remove();
                        });
                    }
                    if(row) row.remove();
                } else {
                    alert('Ошибка: ' + response.message);
                }
            })
            .catch(err => console.log(err));
        }

        /* Добавление элементов */
        document.querySelectorAll('.add-form').forEach(form => {
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                let formData = new FormData(this);
                fetch('ajax/add_item.php', {
                    method: 'POST',
                    body: formData
                })
                .then(res => res.text())
                .then(data => {
                    location.reload();
                })
                .catch(err => console.log(err));
            });
        });
    </script>
</body>
</html>